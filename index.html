<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>NoirVu</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>

  <!-- left servers -->
  <div class="servers" id="servers"></div>

  <!-- channels / notifications -->
  <div class="channels" id="channels"></div>

  <!-- main content -->
  <div class="main-content" id="mainContent">
    <div class="chat-header">
      <span id="chat-header-text">#general</span>
      <div class="buttons">
        <button onclick="joinStream('audio')">Join Audio</button>
        <button onclick="joinStream('video')">Join Video</button>
      </div>
    </div>

    <!-- streams -->
    <div class="streams-container" id="streams-container">
      <div class="main-stream" id="main-stream">No stream selected</div>
      <div class="secondary-streams" id="streams"></div>
    </div>

    <!-- center content -->
    <div class="center-area" id="centerArea">

      <!-- chat messages -->
      <div class="messages" id="messages"></div>

      <!-- chat input -->
      <div class="input" id="chatComposer">
        <input id="msgInput" placeholder="Message #general" />
        <button onclick="sendMessage()">Send</button>
      </div>

      <!-- profile page (hidden until toggled) -->
      <div class="profile-page hidden" id="profilePage">
        <div class="profile-banner" id="profileBanner">
          <img id="bannerImg" src="" alt="banner" />
        </div>
        <div class="profile-head">
          <div class="profile-pic" id="profilePic"><img id="profilePicImg" src="" /></div>
          <div class="profile-meta">
            <div class="display-name" id="profileDisplayName">Loading..</div>
            <div class="npub small" id="profileNpub">Loading...</div>
          </div>
        </div>
        <div class="profile-stats">
        <div id="profileAbout" class="small profile-about"></div></div>
        
        <div class="profile-stats">
          <div id="followersCount"><strong>0</strong> Followers</div>
          <div id="followingCount"><strong>0</strong> Following</div>
          <div id="lightningAddr" class="small">‚ö° <span id="lnAddr">lnbc1example</span></div>
        </div>
        <div class="profile-actions-row">
          <button class="btn-outline" onclick="editProfile()">Edit Profile</button>
          <button class="btn-outline" onclick="">Share</button>
        </div>

       <div id="profileFeed" class="nostr-feed-container"></div>
       
<style>
:root {
  /* NoirVu Signature Palette */
  --noirvu-bg: #0e0e12;
  --feed-bg: #181a2200;
  --post-bg: #1e202a;
  --button-bg: #252733;
  --button-hover: #322c4a;
  --accent: #8b5cf6;
  --accent-soft: #b794ff;
  --border: #2d2f3c;
  --text-primary: #e8e8f0;
  --text-secondary: #aaa;
  --text-muted: #7a7a9a;
}

body {
  background: var(--noirvu-bg);
  color: var(--text-primary);
  font-family: "Segoe UI", "Inter", sans-serif;
  letter-spacing: 0.2px;
}

/* === SPINNER === */
#nostrSpinner {
  position: fixed;
  inset: 0;
  display: none;
  align-items: center;
  justify-content: center;
  background: rgba(8, 8, 14, 0.6);
  z-index: 99998;
  backdrop-filter: blur(6px);
}

#nostrSpinner .dot {
  width: 10px;
  height: 10px;
  border-radius: 50%;
  background: var(--accent);
  margin: 4px;
  animation: nspin 0.8s infinite alternate;
  box-shadow: 0 0 10px var(--accent-soft);
}

@keyframes nspin {
  to {
    opacity: 0.3;
    transform: scale(0.6);
  }
}

/* === CONTAINERS === */
.nostr-composer,
.nostr-feed-container {
  background: var(--feed-bg);
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 14px;
  margin: 10px 0;
  box-shadow: 0 0 18px rgba(139, 92, 246, 0.05),
              inset 0 0 12px rgba(139, 92, 246, 0.03);
  transition: all 0.3s ease;
}

.nostr-composer:hover,
.nostr-feed-container:hover {
  box-shadow: 0 0 24px rgba(139, 92, 246, 0.15),
              inset 0 0 20px rgba(139, 92, 246, 0.06);
}

/* === POST CARD === */
.nostr-postcard {
  background: var(--post-bg);
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 14px 16px;
  margin: 10px 12px;
  box-shadow: 0 0 12px rgba(139, 92, 246, 0.05);
  transition: all 0.3s ease;
}

.nostr-postcard:hover {
  background: #202234;
  box-shadow: 0 0 20px rgba(139, 92, 246, 0.18);
}

/* === INLINE META === */
.nostr-inline {
  display: flex;
  gap: 10px;
  align-items: flex-start;
}

.nostr-inline .avatar {
 width: 48px;
  height: 48px;
  border-radius: 50%;
  object-fit: cover;
  border: 1px solid var(--border);
  box-shadow: 0 0 6px rgba(139, 92, 246, 0.1);
}

.nostr-meta {
  font-size: 13px;
  color: var(--text-muted);
}

.nostr-name {
  color: var(--accent-soft);
  font-weight: 600;
}

.nostr-npub {
  color: var(--text-secondary);
  font-size: 12px;
}

/* === CONTENT === */
.nostr-content {
  font-size: 15px;
  color: var(--text-primary);
  white-space: pre-wrap;
  word-break: break-word;
  margin-top: 2px;
  text-shadow: 0 0 6px rgba(183, 148, 255, 0.05);
}

/* === ACTION BUTTONS === */
.nostr-actions {
  display: flex;
  gap: 16px;
  margin-top: 10px;
}

.nostr-actions button {
  background: var(--button-bg);
  border: 1px solid var(--border);
  color: var(--text-secondary);
  border-radius: 8px;
  padding: 6px 10px;
  cursor: pointer;
  font-size: 14px;
  transition: all 0.25s ease;
  box-shadow: 0 0 8px rgba(139, 92, 246, 0.08);
}

.nostr-actions button:hover {
  background: var(--button-hover);
  color: var(--accent-soft);
  box-shadow: 0 0 14px rgba(139, 92, 246, 0.25);
  transform: translateY(-1px);
}

/* === THREAD LINE === */
.nostr-threadline {
  position: absolute;
  left: 16px;
  top: 52px;
  bottom: 8px;
  width: 2px;
  background: var(--accent);
  border-radius: 2px;
  opacity: 0.2;
  box-shadow: 0 0 10px rgba(139, 92, 246, 0.5);
}

/* === MINI PROFILES === */
.mini-profile-avatar,
#miniAvatar {
  width: 48px;
  height: 48px;
  border-radius: 10px;
  object-fit: cover;
  border: 1px solid var(--border);
  box-shadow: 0 0 12px rgba(139, 92, 246, 0.2);
}
</style>



       <div id="nostrSpinner"><div class="dot"></div><div class="dot"></div><div class="dot"></div></div>
       <script src="nostr/auth.js"></script>
       <script src="nostr/profile.js"></script>
       <script src="nostr/feed.js"></script>
       <script src="nostr/settings.js"></script>
       <script src="nostr/ui.js"></script></body>
      </div>
    </div>
  </div>

  <!-- members / contacts -->
  <div class="members" id="membersColumn">
    <div class="member-list" id="members"></div>

    <div class="profile-box" id="profileBox" title="Open profile">
      <div class="profile-info">
        <div class="profile-avatar">
          <img src="https://i.pravatar.cc/35?img=64" id="miniAvatar" style="width:35px;height:35px"/>
          <div class="profile-status" style="background:var(--accent)"></div>
        </div>
        <div class="profile-name" id="miniName">NostrBot</div>
      </div>
      <div class="profile-actions">
        <button title="Mute">üé§</button>
        <button title="Deafen">üîá</button>
        <button title="Settings">‚öôÔ∏è</button>
        <button title="Logout">X</button>
      </div>
    </div>
  </div>
  

  <script src="script.js"></script>
  <style>#nostrSpinner{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,.35);z-index:99998}#nostrSpinner .dot{width:10px;height:10px;border-radius:50%;background:#888;margin:4px;animation:nspin 0.9s infinite alternate}@keyframes nspin{to{opacity:.2;transform:scale(.6)}} .nostr-composer{background:#11151c;border:1px solid #222;border-radius:12px;padding:10px;margin:8px 0;}</style>
<div id="nostrSpinner"><div class="dot"></div><div class="dot"></div><div class="dot"></div></div>
<script src="nostr/auth.js"></script>
<script src="nostr/profile.js"></script>
<script src="nostr/feed.js"></script>
<script src="nostr/settings.js"></script>
<script src="nostr/ui.js"></script>

</html>
