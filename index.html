<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>NostrCord</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>

  <!-- left servers -->
  <div class="servers" id="servers"></div>

  <!-- channels / notifications -->
  <div class="channels" id="channels"></div>

  <!-- main content -->
  <div class="main-content" id="mainContent">
    <div class="chat-header">
      <span id="chat-header-text">#general</span>
      <div class="buttons">
        <button onclick="joinStream('audio')">Join Audio</button>
        <button onclick="joinStream('video')">Join Video</button>
      </div>
    </div>

    <!-- streams -->
    <div class="streams-container" id="streams-container">
      <div class="main-stream" id="main-stream">No stream selected</div>
      <div class="secondary-streams" id="streams"></div>
    </div>

    <!-- center content -->
    <div class="center-area" id="centerArea">

      <!-- chat messages -->
      <div class="messages" id="messages"></div>

      <!-- chat input -->
      <div class="input" id="chatComposer">
        <input id="msgInput" placeholder="Message #general" />
        <button onclick="sendMessage()">Send</button>
      </div>

      <!-- profile page (hidden until toggled) -->
      <div class="profile-page hidden" id="profilePage">
        <div class="profile-banner" id="profileBanner">
          <img id="bannerImg" src="" alt="banner" />
        </div>
        <div class="profile-head">
          <div class="profile-pic" id="profilePic"><img id="profilePicImg" src="" /></div>
          <div class="profile-meta">
            <div class="display-name" id="profileDisplayName">NostrBot</div>
            <div class="npub small" id="profileNpub">npub1qxyz‚Ä¶</div>
          </div>
        </div>
        <div class="profile-stats">
          <div id="followersCount"><strong>0</strong> Followers</div>
          <div id="followingCount"><strong>0</strong> Following</div>
          <div id="lightningAddr" class="small">‚ö° <span id="lnAddr">lnbc1example</span></div>
        </div>
        <div class="profile-actions-row">
          <button class="btn-outline" onclick="editProfile()">Edit Profile</button>
          <button class="btn-outline" onclick="toggleProfileView()">Back</button>
        </div>

       <div id="profileFeed" class="nostr-feed-container"></div>
       <style>:root{ --feed-bg:#151821; --post-bg:#1f232e; }#nostrSpinner{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,.35);z-index:99998}#nostrSpinner .dot{width:10px;height:10px;border-radius:50%;background:#888;margin:4px;animation:nspin .9s infinite alternate}@keyframes nspin{to{opacity:.2;transform:scale(.6)}}.nostr-composer{background:var(--feed-bg);border:1px solid #222;border-radius:12px;padding:12px;margin:10px 0}.nostr-feed-container{background:var(--feed-bg);border:1px solid #222;border-radius:12px;padding:8px 0;margin-top:10px}.nostr-postcard{background:var(--post-bg);border:1px solid #2f3136;border-radius:12px;padding:12px 14px;margin:8px 12px;transition:background .15s ease}.nostr-postcard:hover{background:#232836}.nostr-inline{display:flex;gap:10px;align-items:flex-start}.nostr-inline .avatar{width:40px;height:40px;border-radius:50%;object-fit:cover}.nostr-meta{font-size:13px;color:#aab}.nostr-name{color:#e6e6e6;font-weight:600}.nostr-npub{color:#889}.nostr-content{font-size:15px;color:#ddd;white-space:pre-wrap;word-break:break-word;margin-top:6px}.nostr-actions{display:flex;gap:16px;margin-top:8px}.nostr-actions button{background:none;border:none;color:#aaa;cursor:pointer}.nostr-threadline{position:absolute;left:16px;top:52px;bottom:8px;width:2px;background:#2a2f3a;border-radius:2px}.mini-profile-avatar, #miniAvatar{width:48px;height:48px;border-radius:10px;object-fit:cover}</style>\n<div id="nostrSpinner"><div class="dot"></div><div class="dot"></div><div class="dot"></div></div>\n<script src="nostr/auth.js"></script>\n<script src="nostr/profile.js"></script>\n<script src="nostr/feed.js"></script>\n<script src="nostr/settings.js"></script>\n<script src="nostr/ui.js"></script>\n</body>
      </div>
    </div>
  </div>

  <!-- members / contacts -->
  <div class="members" id="membersColumn">
    <div class="member-list" id="members"></div>

    <div class="profile-box" id="profileBox" title="Open profile">
      <div class="profile-info">
        <div class="profile-avatar">
          <img src="https://i.pravatar.cc/35?img=64" id="miniAvatar" style="width:35px;height:35px"/>
          <div class="profile-status" style="background:var(--accent)"></div>
        </div>
        <div class="profile-name" id="miniName">NostrBot</div>
      </div>
      <div class="profile-actions">
        <button title="Mute">üé§</button>
        <button title="Deafen">üîá</button>
        <button title="Settings">‚öôÔ∏è</button>
      </div>
    </div>
  </div>

  
  <!-- Login Screen Overlay -->
  <div class="login-screen" id="loginScreen">
    <div class="login-card">
      <p class="login-sub">Choose how you want to log in</p>
      <button class="login-option" onclick="loginWithNsec()">üîë Login with NSEC</button>
      <button class="login-option" onclick="loginWithExtension()">üß© Login with Nostr Extension</button>
      <button class="login-option" onclick="createNewAccount()">üöÄ Create New Account</button>
    </div>
  </div>

  <script src="script.js"></script>

</html>
